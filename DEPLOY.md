# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é –Ω–∞ Render.com

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:
- ‚úÖ –ó–∞–º–µ–Ω–∏–ª–∏ Supabase –Ω–∞ PostgreSQL (–±–µ—Å–ø–ª–∞—Ç–Ω–æ 90 –¥–Ω–µ–π)
- ‚úÖ Telegram polling ‚Üí webhooks (—ç–∫–æ–Ω–æ–º–∏—Ç —Ä–µ—Å—É—Ä—Å—ã)
- ‚úÖ setInterval ‚Üí –≤–Ω–µ—à–Ω–∏–π endpoint `/check-lights` (–≤—ã–∑—ã–≤–∞–µ—Ç—Å—è cron)

## –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ PostgreSQL –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–∞ Render

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ [render.com](https://render.com) –∏ –≤–æ–π–¥–∏—Ç–µ/–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å
2. –ù–∞–∂–º–∏—Ç–µ **"New +"** ‚Üí **"PostgreSQL"**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - **Name**: `light-monitor-db`
   - **Database**: `light_monitor`
   - **User**: `light_monitor_user`
   - **Region**: –≤—ã–±–µ—Ä–∏—Ç–µ –±–ª–∏–∂–∞–π—à–∏–π
   - **Plan**: **Free** (90 –¥–Ω–µ–π –±–µ—Å–ø–ª–∞—Ç–Ω–æ)
4. –ù–∞–∂–º–∏—Ç–µ **"Create Database"**
5. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ Internal Database URL** - –æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è

## –®–∞–≥ 2: –î–µ–ø–ª–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ Render

### –í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ GitHub (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∫–æ–¥ –Ω–∞ GitHub:
   ```bash
   git add .
   git commit -m "Migrate to Render with PostgreSQL"
   git push origin main
   ```

2. –ù–∞ Render –Ω–∞–∂–º–∏—Ç–µ **"New +"** ‚Üí **"Web Service"**
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –≤–∞—à GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - **Name**: `light-monitor`
   - **Runtime**: `Node`
   - **Build Command**: `npm install`
   - **Start Command**: `npm start`
   - **Plan**: **Free**

5. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (**Environment Variables**):
   - `TELEGRAM_TOKEN` = –≤–∞—à —Ç–æ–∫–µ–Ω –æ—Ç @BotFather
   - `WEBHOOK_URL` = `https://light-monitor.onrender.com` (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à URL)
   - `DATABASE_URL` = Internal Database URL –∏–∑ –®–∞–≥–∞ 1

6. –ù–∞–∂–º–∏—Ç–µ **"Create Web Service"**

### –í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ render.yaml (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π)

1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∫–æ–¥ –Ω–∞ GitHub
2. –ù–∞ Render –Ω–∞–∂–º–∏—Ç–µ **"New +"** ‚Üí **"Blueprint"**
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
4. Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
5. –î–æ–±–∞–≤—å—Ç–µ —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
   - `TELEGRAM_TOKEN`
   - `WEBHOOK_URL`

## –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–Ω–µ—à–Ω–µ–≥–æ Cron –¥–ª—è –ø—Ä–æ–≤–µ—Ä–æ–∫

–¢–∞–∫ –∫–∞–∫ Render Free –º–æ–∂–µ—Ç "–∑–∞—Å—ã–ø–∞—Ç—å", –∏—Å–ø–æ–ª—å–∑—É–µ–º –≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–æ–∫ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥:

### –í–∞—Ä–∏–∞–Ω—Ç 1: cron-job.org (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ [cron-job.org](https://cron-job.org)
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Cronjob:
   - **Title**: Light Monitor Check
   - **URL**: `https://your-app.onrender.com/check-lights`
   - **Schedule**: Every 1 minute (–º–∏–Ω–∏–º—É–º –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –ø–ª–∞–Ω–∞)
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

### –í–∞—Ä–∏–∞–Ω—Ç 2: UptimeRobot (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ [uptimerobot.com](https://uptimerobot.com)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –º–æ–Ω–∏—Ç–æ—Ä:
   - **Monitor Type**: HTTP(s)
   - **URL**: `https://your-app.onrender.com/check-lights`
   - **Monitoring Interval**: 5 minutes (–º–∏–Ω–∏–º—É–º –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ)

‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ cron —Å–µ—Ä–≤–∏—Å—ã –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –∏–Ω—Ç–µ—Ä–≤–∞–ª 30 —Å–µ–∫—É–Ω–¥. –ú–∏–Ω–∏–º—É–º 1-5 –º–∏–Ω—É—Ç.

## –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: `https://your-app.onrender.com`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Render Dashboard
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/status` –≤ Telegram –±–æ—Ç–µ
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –ø–∏–Ω–≥:
   ```bash
   curl "https://your-app.onrender.com/ping?chat_id=YOUR_CHAT_ID"
   ```

## –ü–æ–ª—É—á–µ–Ω–∏–µ Chat ID –¥–ª—è Telegram

1. –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ –≥—Ä—É–ø–ø—É –∏–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ –µ–º—É
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
3. –û—Ç–∫—Ä–æ–π—Ç–µ: `https://api.telegram.org/bot<YOUR_TOKEN>/getUpdates`
4. –ù–∞–π–¥–∏—Ç–µ `"chat":{"id": 123456789}` - —ç—Ç–æ –≤–∞—à chat_id

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞

```bash
git add .
git commit -m "Update"
git push origin main
```

Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è.

## –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Free –ø–ª–∞–Ω–∞ Render:
- PostgreSQL —É–¥–∞–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ **90 –¥–Ω–µ–π**
- –°–µ—Ä–≤–∏—Å "–∑–∞—Å—ã–ø–∞–µ—Ç" –ø–æ—Å–ª–µ 15 –º–∏–Ω—É—Ç –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- 750 —á–∞—Å–æ–≤/–º–µ—Å—è—Ü (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è 1 —Å–µ—Ä–≤–∏—Å–∞ 24/7)

### üîÑ –ß—Ç–æ –¥–µ–ª–∞—Ç—å —á–µ—Ä–µ–∑ 90 –¥–Ω–µ–π:
1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é PostgreSQL –±–∞–∑—É
2. –û–±–Ω–æ–≤–∏—Ç–µ `DATABASE_URL` –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
3. –î–∞–Ω–Ω—ã–µ –∏–∑ —Å—Ç–∞—Ä–æ–π –±–∞–∑—ã –±—É–¥—É—Ç –ø–æ—Ç–µ—Ä—è–Ω—ã (—Å–¥–µ–ª–∞–π—Ç–µ –±—ç–∫–∞–ø –µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

### üìä –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π –ë–î:
- **Supabase** (500 MB –±–µ—Å–ø–ª–∞—Ç–Ω–æ –Ω–∞–≤—Å–µ–≥–¥–∞) - –º–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è
- **MongoDB Atlas** (512 MB –±–µ—Å–ø–ª–∞—Ç–Ω–æ –Ω–∞–≤—Å–µ–≥–¥–∞)
- **PlanetScale** (5 GB –±–µ—Å–ø–ª–∞—Ç–Ω–æ)

## Endpoints –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

- `GET/POST /ping?chat_id=XXX` - –ø–∏–Ω–≥ –æ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- `GET /check-lights` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–≤—ã–∑—ã–≤–∞–µ—Ç—Å—è cron)
- `POST /bot<TOKEN>` - webhook –¥–ª—è Telegram
- `/status` - –∫–æ–º–∞–Ω–¥–∞ –≤ Telegram –±–æ—Ç–µ

## Troubleshooting

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `TELEGRAM_TOKEN` –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ webhook: `https://api.telegram.org/bot<TOKEN>/getWebhookInfo`

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `DATABASE_URL` –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –±–∞–∑–∞ —Å–æ–∑–¥–∞–Ω–∞ –∏ –∞–∫—Ç–∏–≤–Ω–∞

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ "–∑–∞—Å—ã–ø–∞–µ—Ç":
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ UptimeRobot –¥–ª—è –ø–∏–Ω–≥–∞ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω Render ($7/–º–µ—Å—è—Ü)
